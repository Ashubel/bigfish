webpackJsonp([1],{"07Ns":function(t,e){},"0YEU":function(t,e){},"4Uwr":function(t,e,n){t.exports=n.p+"static/img/logo.93f666d.jpg"},"5hdN":function(t,e){},AsdH:function(t,e){},BAMQ:function(t,e){},Eham:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),a={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view",{staticClass:"wrapper"})},staticRenderFns:[]};var o=n("VU/8")({name:"App"},a,!1,function(t){n("eS0q")},null,null).exports,s=n("/ocq"),c=n("Sazm"),r=n.n(c),u=r.a.initializeApp({apiKey:"AIzaSyA3yA8WnP4iMVspXqA83XWsOPtQ4NMPjpw",authDomain:"bigfish-f0a80.firebaseapp.com",databaseURL:"https://bigfish-f0a80.firebaseio.com",projectId:"bigfish-f0a80",storageBucket:"bigfish-f0a80.appspot.com",messagingSenderId:"279103206853"}).database(),d=u.ref("tag"),l=u.ref("fish"),m=u.ref("place"),p=u.ref("equipment"),v=u.ref("topic"),h=u.ref("tagTopic"),f=u.ref("comment"),g=u.ref("topicComment"),_={name:"Navbar",firebase:{fishes:l,places:m,equipments:p},data:function(){return{navs:[{name:"鱼食",children:[{name:"饵料",url:"/fish-food/bait"},{name:"窝料",url:"/fish-food/feed"}]},{name:"决策支持",children:[{name:"历史数据分析",url:"/decision-support/data-analysis"},{name:"钓场地图",url:"/decision-support/fishing-spot-map"},{name:"钓鱼计划",children:[{name:"机器人推荐",url:"/decision-support/fishing-plan/robot-recommendation"},{name:"团队讨论",url:"/decision-support/fishing-plan/team-discussion"}]},{name:"选钓位",url:"/decision-support/select-position"}]},{name:"钓鱼日志",url:"/fishing-log"},{name:"消息中心",url:"/messages"},{name:"配置中心",url:"/config"},{name:"布局切换",url:"/toggle-layout"},{name:"退出登录"}]}},computed:{categories:function(){return[{category:"fish",name:"目标鱼",children:this.fishes},{category:"place",name:"钓场",children:this.places},{category:"equipment",name:"装备",children:this.equipments}]}},methods:{goto:function(t,e){var n=this;e.target.parentNode.classList.contains("expanded")?e.target.parentNode.classList.remove("expanded"):e.target.parentNode.classList.add("expanded"),"退出登录"===t.name&&r.a.auth().signOut().then(function(){n.$router.replace("signin")})}}},T={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{attrs:{role:"navigation"}},[n("ul",[t._l(t.categories,function(e){return n("li",{key:e.id,class:{hasChildren:e.children}},[e.url?n("router-link",{attrs:{to:e.url}},[t._v(t._s(e.name))]):n("a",{attrs:{href:"#!"},on:{click:function(n){t.goto(e,n)}}},[t._v(t._s(e.name))]),t._v(" "),e.children?n("ul",t._l(e.children,function(e){return n("li",{key:e.id,class:{hasChildren:e.children}},[n("router-link",{attrs:{to:{name:"fish",params:{id:e[".key"]}}}},[t._v(t._s(e.name))])],1)})):t._e()],1)}),t._v(" "),t._l(t.navs,function(e){return n("li",{key:e.id,class:{hasChildren:e.children}},[e.url?n("router-link",{attrs:{to:e.url}},[t._v(t._s(e.name))]):n("a",{attrs:{href:"#!"},on:{click:function(n){t.goto(e,n)}}},[t._v(t._s(e.name))]),t._v(" "),e.children?n("ul",t._l(e.children,function(e){return n("li",{key:e.id,class:{hasChildren:e.children}},[e.url?n("router-link",{attrs:{to:e.url}},[t._v(t._s(e.name))]):n("a",{attrs:{href:"#!"},on:{click:function(n){t.goto(e,n)}}},[t._v(t._s(e.name))]),t._v(" "),e.children?n("ul",t._l(e.children,function(e){return n("li",{key:e.id,class:{hasChildren:e.children}},[e.url?n("router-link",{attrs:{to:e.url}},[t._v(t._s(e.name))]):n("a",{attrs:{href:"#!"},on:{click:function(n){t.goto(e,n)}}},[t._v(t._s(e.name))])],1)})):t._e()],1)})):t._e()],1)})],2)])},staticRenderFns:[]};var w=n("VU/8")(_,T,!1,function(t){n("avIM")},"data-v-ed9b5dfc",null).exports,C={name:"Index",components:{Navbar:w}},k={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("Navbar"),this._v(" "),e("router-view",{staticClass:"main-content",attrs:{name:"content"}})],1)},staticRenderFns:[]};var y=n("VU/8")(C,k,!1,function(t){n("OFG0")},"data-v-79407420",null).exports,b={name:"SingIn",data:function(){return{email:"",password:""}},methods:{login:function(){var t=this;r.a.auth().signInWithEmailAndPassword(this.email,this.password).then(function(e){t.$router.replace("index")},function(t){alert(t.message)})}}},x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login"},[i("img",{attrs:{src:n("4Uwr")}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"text",placeholder:"Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),i("button",{on:{click:t.login}},[t._v("登录")]),t._v(" "),i("p",[t._v("没有的话，注册一个"),i("router-link",{attrs:{to:"/signup"}},[t._v("新账户")])],1)])},staticRenderFns:[]};var E=n("VU/8")(b,x,!1,function(t){n("SE7H")},"data-v-6c5ef0da",null).exports,R={name:"SignUp",data:function(){return{email:"",password:""}},methods:{signup:function(){r.a.auth().createUserWithEmailAndPassword(this.email,this.password).then(function(t){alert("Well Done! You are connected")},function(t){alert(t.message)})}}},j={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"signup"},[i("img",{attrs:{src:n("4Uwr")}}),t._v(" "),i("h1",[t._v("Let's create a new account")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"text",placeholder:"Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),i("button",{on:{click:t.signup}},[t._v("Sign UP")]),t._v(" "),i("p",[t._v("or go back to "),i("router-link",{attrs:{to:"/login"}},[t._v("login")])],1)])},staticRenderFns:[]};var I=n("VU/8")(R,j,!1,function(t){n("P3re")},"data-v-c9f08208",null).exports,$={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"gallery"},[n("div",{staticClass:"column"},[n("img",{attrs:{src:"'assets/20150903_061401.jpg'"}}),t._v(" "),n("img",{attrs:{src:"'assets/20170803_161928.jpg'"}})]),t._v(" "),n("div",{staticClass:"column"},[n("img",{attrs:{src:"'assets/20150912_110500.jpg'"}})]),t._v(" "),n("div",{staticClass:"column"},[n("img",{attrs:{src:"'assets/20160625_063734.jpg'"}}),t._v(" "),n("img",{attrs:{src:"'/assets/20160625_073616.jpg'"}}),t._v(" "),n("img",{attrs:{src:"'/assets/20160702_074649.jpg'"}})]),t._v(" "),n("div",{staticClass:"column"},[n("img",{attrs:{src:"'assets/20160826_153520.jpg'"}}),t._v(" "),n("img",{attrs:{src:"'assets/20160827_052823.jpg'"}}),t._v(" "),n("img",{attrs:{src:"'assets/20160909_173959.jpg'"}})]),t._v(" "),n("div",{staticClass:"column"},[n("img",{attrs:{src:"'assets/20160910_061354.jpg'"}})]),t._v(" "),n("div",{staticClass:"column"},[n("img",{attrs:{src:"'assets/20170719_142248.jpg'"}}),t._v(" "),n("img",{attrs:{src:"'assets/20170729_052006.jpg'"}}),t._v(" "),n("img",{attrs:{src:"'assets/20170803_151740.jpg'"}})])])}]};var N=n("VU/8")({name:"Gallery"},$,!1,function(t){n("s2MA")},"data-v-55fc7e52",null).exports,P=n("Dd8w"),A=n.n(P),U=n("NYxO"),S={name:"TopicList",props:["tag"],data:function(){return{checkedTopics:[]}},computed:A()({},Object(U.e)("topic",["taggedTopics"]),Object(U.c)("topic",["topicCount"])),watch:{tag:{handler:function(t,e){this.setTaggedTopics(void 0),this.getTaggedTopics(t)},immediate:!0}},methods:A()({},Object(U.d)("topic",["setTaggedTopics"]),Object(U.b)("topic",["getTaggedTopics","deleteTaggedTopics"]))},O={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"topic-list"},[n("p",[t._v("\n    批处理："),n("button",{on:{click:function(e){t.deleteTaggedTopics(t.checkedTopics)}}},[t._v("删除")])]),t._v(" "),n("table",[t._m(0),t._v(" "),n("tbody",[-1===t.topicCount?n("tr",[t._m(1)]):0===t.topicCount?n("tr",[n("td",{attrs:{colspan:"3"}},[t._v("There is no data for the time being")])]):t._l(t.taggedTopics,function(e,i){return n("tr",{key:e.key},[n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedTopics,expression:"checkedTopics"}],attrs:{type:"checkbox"},domProps:{value:{key:e.key,index:i},checked:Array.isArray(t.checkedTopics)?t._i(t.checkedTopics,{key:e.key,index:i})>-1:t.checkedTopics},on:{change:function(n){var a=t.checkedTopics,o=n.target,s=!!o.checked;if(Array.isArray(a)){var c={key:e.key,index:i},r=t._i(a,c);o.checked?r<0&&(t.checkedTopics=a.concat([c])):r>-1&&(t.checkedTopics=a.slice(0,r).concat(a.slice(r+1)))}else t.checkedTopics=s}}})]),t._v(" "),n("td",[n("router-link",{attrs:{to:{name:"topic",params:{id:e.key}}}},[t._v(t._s(e.title))])],1),t._v(" "),t._m(2,!0)])})],2)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("th"),this._v(" "),e("th",[this._v("话题")]),this._v(" "),e("th",[this._v("评论")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{attrs:{colspan:"3"}},[e("div",{staticClass:"spinner"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("span",{staticClass:"comments-number"},[this._v("123")])])}]};var F=n("VU/8")(S,O,!1,function(t){n("Eham")},"data-v-4af2104c",null).exports,q={name:"BaseTable",props:["tag"],data:function(){return{newTopic:{title:"",content:""}}},computed:Object(U.e)("topic",["taggedTopics"]),methods:A()({},Object(U.b)("topic",["createTaggedTopic"]),{createTopic:function(){var t=this;this.createTaggedTopic(A()({},this.newTopic)).catch(function(t){console.log(t)}).finally(function(){t.newTopic.title="",t.newTopic.content=""})}})},V={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"create-topic"},[n("header",[t._v("发言")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newTopic.title,expression:"newTopic.title"}],staticClass:"editor topic-title",attrs:{type:"text",placeholder:"话题"},domProps:{value:t.newTopic.title},on:{input:function(e){e.target.composing||t.$set(t.newTopic,"title",e.target.value)}}}),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newTopic.content,expression:"newTopic.content"}],staticClass:"editor topic-content",attrs:{placeholder:"详述"},domProps:{value:t.newTopic.content},on:{input:function(e){e.target.composing||t.$set(t.newTopic,"content",e.target.value)}}}),t._v(" "),n("footer",[n("button",{attrs:{id:"btn-submit"},on:{click:function(e){t.createTopic()}}},[t._v("提交")])])])},staticRenderFns:[]};var B={name:"SubjectPage",props:["id"],components:{TopicList:F,CreateTopic:n("VU/8")(q,V,!1,function(t){n("YUpa")},null,null).exports},computed:{subject:function(){return this.subjects[".key"]?this.subjects[this.id]:{name:"",description:""}}},firebase:function(){return{subjects:{source:u.ref(this.$route.name),asObject:!0,readyCallback:function(){}}}}},L={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fish-define"},[n("h1",{staticClass:"subject"},[t._v(t._s(t.subject.name))]),t._v(" "),n("p",{staticClass:"description"},[t._v(t._s(t.subject.description))]),t._v(" "),n("TopicList",{attrs:{tag:this.id}}),t._v(" "),n("CreateTopic",{attrs:{tag:this.id}})],1)},staticRenderFns:[]};var M=n("VU/8")(B,L,!1,function(t){n("07Ns")},"data-v-929d1782",null).exports,D={name:"TopicEditor",props:["id"],data:function(){return{viewState:!0,updatedTopic:{}}},computed:A()({},Object(U.e)("topic",["currentTopic"])),methods:A()({},Object(U.b)("topic",["updateTopic"]),{triggerEdit:function(){this.updatedTopic=A()({},this.currentTopic),this.viewState=!1},cancelEdit:function(){this.viewState=!0},saveEdit:function(){var t=this;this.updateTopic([this.id,A()({},this.updatedTopic)]).then(function(){t.viewState=!0}).catch(function(t){console.log(t)})}})},H={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["topic-editor",{view:t.viewState}]},[n("h1",{staticClass:"title field-value"},[t._v(t._s(t.currentTopic.title))]),t._v(" "),n("p",{staticClass:"content field-value"},[t._v(t._s(t.currentTopic.content))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedTopic.title,expression:"updatedTopic.title"}],staticClass:"field-editor field-title",domProps:{value:t.updatedTopic.title},on:{input:function(e){e.target.composing||t.$set(t.updatedTopic,"title",e.target.value)}}}),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.updatedTopic.content,expression:"updatedTopic.content"}],staticClass:"field-editor field-content",domProps:{value:t.updatedTopic.content},on:{input:function(e){e.target.composing||t.$set(t.updatedTopic,"content",e.target.value)}}}),t._v(" "),void 0!==t.currentTopic.title?n("div",{staticClass:"btn-group"},[n("button",{staticClass:"btn-edit",on:{click:t.triggerEdit}},[t._v("编辑")]),t._v(" "),n("button",{staticClass:"btn-save",on:{click:t.saveEdit}},[t._v("保存")]),t._v(" "),n("button",{staticClass:"btn-cancel",on:{click:t.cancelEdit}},[t._v("取消")])]):t._e()])},staticRenderFns:[]};var W=n("VU/8")(D,H,!1,function(t){n("BAMQ")},"data-v-955259d0",null).exports,Y={name:"CommentList",props:["topicId"],data:function(){return{checkedComments:[]}},computed:A()({},Object(U.e)("comment",["comments"]),Object(U.c)("comment",["commentCount"])),watch:{topicId:{handler:function(t,e){this.setComments(void 0),this.getComments(t)},immediate:!0}},methods:A()({},Object(U.d)("comment",["setComments"]),Object(U.b)("comment",["getComments","deleteComments"]))},G={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-list"},[n("p",[t._v("\n    批处理："),n("button",{on:{click:function(e){t.deleteComments([t.topicId,t.checkedComments])}}},[t._v("删除")])]),t._v(" "),n("table",[t._m(0),t._v(" "),n("tbody",[-1===t.commentCount?n("tr",[t._m(1)]):0===t.commentCount?n("tr",[n("td",{attrs:{colspan:"3"}},[t._v("There is no data for the time being")])]):t._l(t.comments,function(e,i){return n("tr",{key:e.key},[n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedComments,expression:"checkedComments"}],attrs:{type:"checkbox"},domProps:{value:{key:e.key,index:i},checked:Array.isArray(t.checkedComments)?t._i(t.checkedComments,{key:e.key,index:i})>-1:t.checkedComments},on:{change:function(n){var a=t.checkedComments,o=n.target,s=!!o.checked;if(Array.isArray(a)){var c={key:e.key,index:i},r=t._i(a,c);o.checked?r<0&&(t.checkedComments=a.concat([c])):r>-1&&(t.checkedComments=a.slice(0,r).concat(a.slice(r+1)))}else t.checkedComments=s}}})]),t._v(" "),n("td",[n("p",[t._v(t._s(e.content))])]),t._v(" "),t._m(2,!0)])})],2)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("th"),this._v(" "),e("th",[this._v("评论")]),this._v(" "),e("th",[this._v("点赞")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{attrs:{colspan:"3"}},[e("div",{staticClass:"spinner"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("span",{staticClass:"thumbs-up"},[this._v("123")])])}]};var K=n("VU/8")(Y,G,!1,function(t){n("0YEU")},"data-v-1f4d3916",null).exports,Z={name:"CommentEditor",props:["topicId","initComment"],data:function(){return{currentComment:this.initComment?this.initComment:{content:""}}},computed:Object(U.e)("comment",["comments"]),methods:A()({},Object(U.b)("comment",["createComment"]),{saveEdit:function(){var t=this;this.initComment?this.updateComment([this.topicId,A()({},this.currentComment)]).then(function(){}).catch(function(t){console.log(t)}):this.createComment([this.topicId,A()({},this.currentComment)]).catch(function(t){console.log(t)}).finally(function(){t.currentComment.content=""})}})},z={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"comment-editor"},[n("header",[t._v("工具栏（markdown支持）")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.currentComment.content,expression:"currentComment.content"}],staticClass:"editor",attrs:{placeholder:"详述"},domProps:{value:t.currentComment.content},on:{input:function(e){e.target.composing||t.$set(t.currentComment,"content",e.target.value)}}}),t._v(" "),n("footer",[n("button",{staticClass:"btn-save",on:{click:t.saveEdit}},[t._v("保存")]),t._v(" "),n("button",{staticClass:"btn-cancel"},[t._v("取消")])])])},staticRenderFns:[]};var Q={name:"TopicPage",props:["id"],components:{TopicEditor:W,CommentList:K,CommentEditor:n("VU/8")(Z,z,!1,function(t){n("AsdH")},"data-v-7f773124",null).exports},methods:A()({},Object(U.b)("topic",["getCurrentTopic"])),created:function(){this.getCurrentTopic(this.id)}},X={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("TopicEditor",{attrs:{id:this.id}}),this._v(" "),e("CommentList",{attrs:{topicId:this.id}}),this._v(" "),e("CommentEditor",{attrs:{topicId:this.id}})],1)},staticRenderFns:[]};var J=n("VU/8")(Q,X,!1,function(t){n("5hdN")},"data-v-474e03ef",null).exports,tt=n("woOf"),et=n.n(tt),nt=n("fZjL"),it=n.n(nt),at=n("BO1k"),ot=n.n(at),st={name:"BaseTable",props:["datasource","subject"],data:function(){return{activeRowId:null,editedRow:{},newRow:{name:"",description:""},checkedRows:[]}},firebase:function(){return{rows:u.ref(this.datasource),tags:u.ref("tag")}},methods:{creatRow:function(){var t=this,e=this.$firebaseRefs.rows.push().key,n=this.$firebaseRefs.tags.push().key,i={};i["/"+this.datasource+"/"+e]=this.newRow,i["/tag/"+n]={relatedKey:e,name:this.newRow.name},u.ref().update(i,function(e){e?console.log(e):(t.newRow.name="",t.newRow.description="")})},deleteRows:function(){var t={},e=!0,n=!1,i=void 0;try{for(var a,o=ot()(this.checkedRows);!(e=(a=o.next()).done);e=!0){var s=a.value;t["/"+this.datasource+"/"+s]=null,this.$firebaseRefs.tags.orderByChild("relatedKey").equalTo(s).once("value",function(e){var n=e.val();for(var i in n)n[i]=null,t["/tag/"+i]=null})}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}u.ref().update(t,function(t){t&&console.log(t)})},triggerEdit:function(t,e){this.activeRowId=t[".key"],this.$nextTick(function(){return e.target.parentNode.parentNode.querySelector("[type=text]").select()})},cancelEdit:function(t){this.activeRowId=null},saveEditedName:function(t){this.editedRow.name=t.target.value},saveEditedDesc:function(t){this.editedRow.description=t.target.value},updateRow:function(t){var e=this;if(it()(this.editedRow).length){var n=A()({},t);delete n[".key"];var i={};return i[t[".key"]]=et()(n,this.editedRow),this.$firebaseRefs.rows.update(i,function(t){t?console.log(t):e.cancelEdit()})}}}},ct={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:{selector:".in-edit",func:t.cancelEdit},expression:"{ selector: '.in-edit', func: cancelEdit }"}],staticClass:"fish-list"},[n("h1",{staticClass:"subject"},[t._v(t._s(t.subject))]),t._v(" "),n("p",[t._v("\n    批处理："),n("button",{on:{click:t.deleteRows}},[t._v("删除")])]),t._v(" "),n("table",[t._m(0),t._v(" "),n("tbody",[t._l(t.rows,function(e){return n("tr",{key:e[".key"],class:{"in-edit":e[".key"]==t.activeRowId}},[n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedRows,expression:"checkedRows"}],attrs:{type:"checkbox"},domProps:{value:e[".key"],checked:Array.isArray(t.checkedRows)?t._i(t.checkedRows,e[".key"])>-1:t.checkedRows},on:{change:function(n){var i=t.checkedRows,a=n.target,o=!!a.checked;if(Array.isArray(i)){var s=e[".key"],c=t._i(i,s);a.checked?c<0&&(t.checkedRows=i.concat([s])):c>-1&&(t.checkedRows=i.slice(0,c).concat(i.slice(c+1)))}else t.checkedRows=o}}})]),t._v(" "),n("td",[n("span",{ref:"name",refInFor:!0,staticClass:"value"},[t._v(t._s(e.name))]),t._v(" "),n("input",{staticClass:"editor",attrs:{type:"text"},domProps:{value:e.name},on:{input:t.saveEditedName}})]),t._v(" "),n("td",[n("span",{staticClass:"value"},[t._v(t._s(e.description))]),t._v(" "),n("textarea",{staticClass:"editor",domProps:{value:e.description},on:{input:t.saveEditedDesc}})]),t._v(" "),n("td",[n("button",{staticClass:"btn-edit",on:{click:function(n){t.triggerEdit(e,n)}}},[t._v("编辑")]),t._v(" "),n("button",{staticClass:"btn-save",on:{click:function(n){t.updateRow(e)}}},[t._v("保存")])])])}),t._v(" "),n("tr",{staticClass:"new-row"},[n("td"),t._v(" "),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newRow.name,expression:"newRow.name"}],staticClass:"editor",attrs:{type:"text"},domProps:{value:t.newRow.name},on:{input:function(e){e.target.composing||t.$set(t.newRow,"name",e.target.value)}}})]),t._v(" "),n("td",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newRow.description,expression:"newRow.description"}],staticClass:"editor",domProps:{value:t.newRow.description},on:{input:function(e){e.target.composing||t.$set(t.newRow,"description",e.target.value)}}})]),t._v(" "),n("td",[n("button",{staticClass:"btn-add",on:{click:t.creatRow}},[t._v("新建")])])])],2)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("th"),this._v(" "),e("th",[this._v("名称")]),this._v(" "),e("th",[this._v("描述")]),this._v(" "),e("th")])}]};var rt={name:"ConfigPage",components:{Navbar:w,BaseTable:n("VU/8")(st,ct,!1,function(t){n("Z6Tj")},"data-v-5c1ba867",null).exports}},ut={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("BaseTable",{attrs:{datasource:"fish",subject:"目标鱼"}}),this._v(" "),e("BaseTable",{attrs:{datasource:"place",subject:"钓场"}}),this._v(" "),e("BaseTable",{attrs:{datasource:"equipment",subject:"装备"}})],1)},staticRenderFns:[]},dt=n("VU/8")(rt,ut,!1,null,null,null).exports;i.a.use(s.a);var lt=new s.a({mode:"history",routes:[{path:"*",redirect:"/index"},{path:"/",redirect:"/signin"},{path:"/signin",name:"SignIn",component:E},{path:"/signup",name:"SignUp",component:I},{path:"/index",component:y,children:[{path:"",name:"Gallery",components:{content:N}}]},{path:"/fish/:id",component:y,children:[{path:"",name:"fish",components:{content:M},props:{content:!0}}]},{path:"/topic/:id",component:y,children:[{path:"",name:"topic",components:{content:J},props:{content:!0}}]},{path:"/config",component:y,children:[{path:"",name:"ConfigPage",components:{content:dt}}]}]});lt.beforeEach(function(t,e,n){var i=r.a.auth().currentUser;t.matched.some(function(t){return t.meta.requiresAuth})?i?n():n("signin"):n()});var mt=lt,pt=n("1mcD"),vt=n.n(pt),ht=(n("sax8"),n("d7EF")),ft=n.n(ht),gt=n("Xxa5"),_t=n.n(gt),Tt=n("exGp"),wt=n.n(Tt),Ct=n("//Fk"),kt=n.n(Ct),yt=n("Zrlr"),bt=n.n(yt),xt=function t(e){bt()(this,t),this.message=e},Et={getTagId:function(t){return d.orderByChild("relatedKey").equalTo(t).once("value").then(function(t){if(!t.val())throw new xt("There is no tag data");return it()(t.val())[0]})},getTaggedTopics:function(t){var e=this;return wt()(_t.a.mark(function n(){var i,a;return _t.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.child(t).once("value").then(function(t){if(!t.val())throw new xt("There is no tagTopic data");return it()(t.val())});case 2:return i=e.sent,e.next=5,kt.a.all(i.map(function(t){return v.child(t).once("value").then(function(t){return t})})).then(function(t){if(!t.length)throw new xt("There is no topic data with associated tag");return t});case 5:return a=e.sent,e.abrupt("return",a.map(function(t){return et()(t.val(),{key:t.key})}));case 7:case"end":return e.stop()}},n,e)}))()},createTaggedTopic:function(t,e){var n={},i=v.push().key;return n["/topic/"+i]=e,n["/tagTopic/"+t+"/"+i]=!0,u.ref().update(n).then(function(){return i})},updateTopic:function(t,e){var n={};return n["/topic/"+t]=e,console.log(t),console.log(e),u.ref().update(n)},deleteTaggedTopics:function(t,e){var n={},i=!0,a=!1,o=void 0;try{for(var s,c=ot()(e);!(i=(s=c.next()).done);i=!0){var r=s.value;n["/topic/"+r]=null,n["/tagTopic/"+t+"/"+r]=null}}catch(t){a=!0,o=t}finally{try{!i&&c.return&&c.return()}finally{if(a)throw o}}return u.ref().update(n)},getTopicById:function(t){return v.orderByKey().equalTo(t).once("value").then(function(e){return e.val()[t]})}},Rt={namespaced:!0,state:{tagId:"",taggedTopics:[],currentTopic:{}},getters:{topicCount:function(t){return t.taggedTopics?t.taggedTopics.length:-1}},mutations:{setTagId:function(t,e){t.tagId=e},setTaggedTopics:function(t,e){t.taggedTopics=e},addItem2TaggedTopics:function(t,e){t.taggedTopics.push(e)},deleteTaggedTopics:function(t,e){for(var n=e.length-1;n>=0;n--)t.taggedTopics.splice(e[n],1)},setTopic:function(t,e){t.currentTopic=e}},actions:{getTagId:function(t,e){var n=t.commit;return Et.getTagId(e).then(function(t){n("setTagId",t)})},getTaggedTopics:function(t,e){var n=this,i=t.dispatch,a=t.commit,o=t.state;return wt()(_t.a.mark(function t(){return _t.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i("getTagId",e);case 2:return t.abrupt("return",Et.getTaggedTopics(o.tagId).then(function(t){a("setTaggedTopics",t)}).catch(function(t){t instanceof xt?(a("setTaggedTopics",[]),console.log("<--System Error--\x3e "+t.message)):console.log(t)}));case 3:case"end":return t.stop()}},t,n)}))()},createTaggedTopic:function(t,e){var n=t.state,i=t.commit;Et.createTaggedTopic(n.tagId,e).then(function(t){i("addItem2TaggedTopics",A()({},e,{key:t}))})},updateTopic:function(t,e){var n=t.commit,i=ft()(e,2),a=i[0],o=i[1];Et.updateTopic(a,o).then(function(){n("setTopic",o)})},deleteTaggedTopics:function(t,e){var n=t.state,i=t.commit,a=e.map(function(t){return t.index}),o=e.map(function(t){return t.key});Et.deleteTaggedTopics(n.tagId,o).then(function(){i("deleteTaggedTopics",a)})},getCurrentTopic:function(t,e){var n=t.commit;Et.getTopicById(e).then(function(t){n("setTopic",t)})}}},jt={getComments:function(t){var e=this;return wt()(_t.a.mark(function n(){var i,a;return _t.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.child(t).once("value").then(function(t){if(!t.val())throw new xt("There is no topicComment data");return it()(t.val())});case 2:return i=e.sent,e.next=5,kt.a.all(i.map(function(t){return f.child(t).once("value").then(function(t){return t})})).then(function(t){if(!t.length)throw new xt("There is no topic data with associated tag");return t});case 5:return a=e.sent,e.abrupt("return",a.map(function(t){return et()(t.val(),{key:t.key})}));case 7:case"end":return e.stop()}},n,e)}))()},createComment:function(t,e){var n={},i=f.push().key;return n["/comment/"+i]=e,n["/topicComment/"+t+"/"+i]=!0,u.ref().update(n).then(function(){return i})},updateComment:function(t,e){var n={};return n["/comment/"+t]=e,u.ref().update(n)},deleteComments:function(t,e){var n={},i=!0,a=!1,o=void 0;try{for(var s,c=ot()(e);!(i=(s=c.next()).done);i=!0){var r=s.value;n["/comment/"+r]=null,n["/topicComment/"+t+"/"+r]=null}}catch(t){a=!0,o=t}finally{try{!i&&c.return&&c.return()}finally{if(a)throw o}}return u.ref().update(n)}},It={namespaced:!0,state:{topicId:"",comments:[]},getters:{commentCount:function(t){return t.comments?t.comments.length:-1}},mutations:{setTopicId:function(t,e){t.topicId=e},setComments:function(t,e){t.comments=e},addComment:function(t,e){t.comments.push(e)},deleteComments:function(t,e){for(var n=e.length-1;n>=0;n--)t.comments.splice(e[n],1)}},actions:{getComments:function(t,e){var n=this,i=(t.dispatch,t.commit);t.state;return wt()(_t.a.mark(function t(){return _t.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",jt.getComments(e).then(function(t){i("setComments",t)}).catch(function(t){t instanceof xt?(i("setComments",[]),console.log("<--System Error--\x3e "+t.message)):console.log(t)}));case 1:case"end":return t.stop()}},t,n)}))()},createComment:function(t,e){t.state;var n=t.commit,i=ft()(e,2),a=i[0],o=i[1];jt.createComment(a,o).then(function(t){n("addComment",A()({},o,{key:t}))})},updateComment:function(t,e){t.commit;var n=ft()(e,2),i=n[0],a=n[1];jt.updateComment(i,a)},deleteComments:function(t,e){t.state;var n=t.commit,i=ft()(e,2),a=i[0],o=i[1],s=o.map(function(t){return t.index}),c=o.map(function(t){return t.key});jt.deleteComments(a,c).then(function(){n("deleteComments",s)})}}};i.a.use(U.a);var $t=new U.a.Store({modules:{topic:Rt,comment:It},strict:!1,plugins:[]});i.a.directive("click-outside",function(t,e,n){var i=e.value.selector,a=e.value.func;document.body.addEventListener("click",function(e){t.querySelector(i)&&(t.querySelector(i)===e.target||t.querySelector(i).contains(e.target)||a())})}),i.a.use(vt.a),i.a.config.productionTip=!1;var Nt=void 0;r.a.auth().onAuthStateChanged(function(t){Nt||(Nt=new i.a({el:"#app",template:"<App/>",components:{App:o},router:mt,store:$t}))})},OFG0:function(t,e){},P3re:function(t,e){},SE7H:function(t,e){},YUpa:function(t,e){},Z6Tj:function(t,e){},avIM:function(t,e){},eS0q:function(t,e){},s2MA:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.03e6b44d01d277be5ecc.js.map